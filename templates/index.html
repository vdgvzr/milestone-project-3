<!DOCTYPE html>

{% extends 'base.html' %}


{% block content %}

    <div class="home-header">
        <div class="carousel">
            {% for book in books | sort(attribute='rating') | reverse %}
                <a class="carousel-item" href="{{ url_for('book_review', book_id=book._id) }}"><img src="{{ book.image_url }}"></a>
            {% endfor %}
        </div>
    </div>

    <div class="row center">
            <div class="col s12">
                <div id="quote-box"></div>
                
                {% for quote in quotes %}
                    <div class="quote-content">
                        <p>"{{quote.book_quote}}"</p>
                        <p> - {{quote.book_author}}</p>
                    </div>
                {% endfor %}
            </div>
        </div>

    <div class="container center-cols">
        <div class="row">
            <div class="col s12 m4">
                <h4 class="title">Recently Added</h4>
            </div>

            <div class="col s12 m4">
                <a href="{{ url_for('all_books') }}" class="waves-effect waves-light btn btn-gold">Browse all of our books here <i class="material-icons right">navigate_next</i></a>
            </div>

            <div class="col s12 m4"></div>
        </div>

        <div class="row grey darken-4">
            {% for recent in recents | reverse %}
                <div class="col s12 m2">
                    <div class="card grey darken-3" style="overflow: visible;">
                        <div class="card-image waves-effect waves-block waves-light">
                            <img class="activator" src="{{recent.image_url}}" alt="book_image">
                        </div>

                        <div class="card-content">
                            <div style="height: 20px;">
                                {% if recent.rating %}
                                    <p><i class="material-icons card-star">star_rate</i> {{recent.rating}}</p>
                                {% else %}
                                    <p>(No reviews yet)</p>
                                {% endif %}
                            </div>
                            <p class="card-title white-text text-darken-4 activator">{{recent.book_title}}</p>
                        </div>

                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4">{{recent.book_title}}<i class="material-icons right">close</i></span>

                            <p class="card-blurb">{{recent.book_blurb}}</p>

                            <a href="{{ url_for('book_review', book_id=recent._id) }}">More..</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="row">
            <div class="col s12 m12">
                <div class="row">
                    <div class="col s12">
                        <h4 class="title">Search and browse books</h4>
                        
                        <nav>
                            <div class="nav-wrapper grey darken-4">
                                <form action="{{ url_for('search_books') }}">
                                    <div class="input-field">
                                    <input id="search0" type="search" name="search" placeholder="Title / Author" required>
                                    <label class="label-icon" for="search"><i class="material-icons">search</i></label>
                                    <i class="material-icons">close</i>
                                    </div>
                                </form>
                            </div>
                        </nav>
                    </div>
                </div>

                <div class="row">
                    <div class="col s12 m6 genre-box">
                        {% for genre in genre %}
                            <a class="genre-link" href="{{ url_for('genre', genre_id=genre._id) }}">{{genre.genre_name}}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}